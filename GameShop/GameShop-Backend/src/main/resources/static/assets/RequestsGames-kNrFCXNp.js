import{_ as U,o as k,c as G,w as g,a as w,e as s,r as i,f as q,m as N,h as C,q as D,p as m,k as T,b as E}from"./index-xSuaytny.js";const M=C({name:"RequestsGames",setup(){const e=D(),a=E(),t=m({aTitle:"",aDescription:"",aPrice:null,aGameStatus:"",aStockQuantity:null,aPhotoUrl:"",categories:[],platforms:[]}),c=m([]),v=m([]),p=m({}),u=m({}),V=m(["InStock","OutOfStock","PreOrder"]),d=m(!1),f=m(null),b={required:r=>!!r||"Required.",number:r=>!isNaN(r)||"Must be a number."},y=async()=>{try{const n=await(await fetch("http://localhost:8080/categories")).json();c.value=n.categories.map(l=>l.categoryName),p.value={},n.categories.forEach(l=>{p.value[l.categoryName]=l.categoryId})}catch(r){console.error("Error fetching categories:",r)}},o=async()=>{try{const n=await(await fetch("http://localhost:8080/platforms")).json();v.value=n.platforms.map(l=>l.platformName),u.value={},n.platforms.forEach(l=>{u.value[l.platformName]=l.platformId})}catch(r){console.error("Error fetching platforms:",r)}},S=async()=>{try{const r=t.value.categories.map(l=>p.value[l]),n=t.value.platforms.map(l=>u.value[l]);await e.addGame({aTitle:t.value.aTitle,aDescription:t.value.aDescription,aPrice:t.value.aPrice,aGameStatus:t.value.aGameStatus,aStockQuantity:t.value.aStockQuantity,aPhotoUrl:t.value.aPhotoUrl,categories:r,platforms:n}),a.push({name:"EmployeeDashboard"}),alert("Email sent to manager for approval.")}catch(r){console.error("Error adding game:",r),alert("Failed to add game.")}},P=()=>{t.value={aTitle:"",aDescription:"",aPrice:null,aGameStatus:"",aStockQuantity:null,aPhotoUrl:"",categories:[],platforms:[]}};return T(async()=>{await y(),await o()}),{game:t,categories:c,platforms:v,gameStatuses:V,valid:d,form:f,rules:b,submitForm:S,clearForm:P}}});function Q(e,a,t,c,v,p){const u=i("v-text-field"),V=i("v-textarea"),d=i("v-select"),f=i("v-btn"),b=i("v-form"),y=i("v-container");return k(),G(y,null,{default:g(()=>[a[11]||(a[11]=w("h2",null,"Add New Game",-1)),s(b,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":a[8]||(a[8]=o=>e.valid=o),onSubmit:N(e.submitForm,["prevent"])},{default:g(()=>[s(u,{modelValue:e.game.aTitle,"onUpdate:modelValue":a[0]||(a[0]=o=>e.game.aTitle=o),label:"Game Title",rules:[e.rules.required],required:""},null,8,["modelValue","rules"]),s(V,{modelValue:e.game.aDescription,"onUpdate:modelValue":a[1]||(a[1]=o=>e.game.aDescription=o),label:"Description",rules:[e.rules.required],required:""},null,8,["modelValue","rules"]),s(u,{modelValue:e.game.aPrice,"onUpdate:modelValue":a[2]||(a[2]=o=>e.game.aPrice=o),modelModifiers:{number:!0},label:"Price",type:"number",rules:[e.rules.required,e.rules.number],required:""},null,8,["modelValue","rules"]),s(d,{modelValue:e.game.aGameStatus,"onUpdate:modelValue":a[3]||(a[3]=o=>e.game.aGameStatus=o),items:e.gameStatuses,label:"Game Status",rules:[e.rules.required],required:""},null,8,["modelValue","items","rules"]),s(u,{modelValue:e.game.aStockQuantity,"onUpdate:modelValue":a[4]||(a[4]=o=>e.game.aStockQuantity=o),modelModifiers:{number:!0},label:"Stock Quantity",type:"number",rules:[e.rules.required,e.rules.number],required:""},null,8,["modelValue","rules"]),s(u,{modelValue:e.game.aPhotoUrl,"onUpdate:modelValue":a[5]||(a[5]=o=>e.game.aPhotoUrl=o),label:"Photo URL",rules:[e.rules.required],required:""},null,8,["modelValue","rules"]),s(d,{modelValue:e.game.categories,"onUpdate:modelValue":a[6]||(a[6]=o=>e.game.categories=o),items:e.categories,label:"Categories",multiple:"",rules:[e.rules.required],required:""},null,8,["modelValue","items","rules"]),s(d,{modelValue:e.game.platforms,"onUpdate:modelValue":a[7]||(a[7]=o=>e.game.platforms=o),items:e.platforms,label:"Platforms",multiple:"",rules:[e.rules.required],required:""},null,8,["modelValue","items","rules"]),s(f,{disabled:!e.valid,type:"submit",color:"success"},{default:g(()=>a[9]||(a[9]=[q("Add Game")])),_:1},8,["disabled"]),s(f,{onClick:e.clearForm,color:"error",text:""},{default:g(()=>a[10]||(a[10]=[q("Clear")])),_:1},8,["onClick"])]),_:1},8,["modelValue","onSubmit"])]),_:1})}const F=U(M,[["render",Q]]);export{F as default};
